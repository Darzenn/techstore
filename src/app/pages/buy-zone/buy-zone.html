<section class="hero-section">
    <div class="hero-content">
        <h1>Finaliza tu Compra</h1>
        <p>Revisa tu pedido y completa tus datos para recibir tu producto.</p>
    </div>
</section>

<section *ngIf="!pedidoConfirmado" id="checkout" class="product-listing">
    <div class="container">
        <h2>Detalles del Pedido</h2>

        <div class="checkout-grid">
            <!-- Resumen del pedido -->
            <div class="order-summary">
                <h3>Tu Pedido</h3>

                <div *ngIf="items.length === 0">
                    <p>No hay productos en tu carrito.</p>
                </div>

                <div *ngFor="let item of items" class="product-card">
                    <img [src]="item.imagen" alt="{{ item.nombre }}" width="80">
                    <div class="card-content">
                        <h4>{{ item.nombre }}</h4>
                        <p>Cantidad: {{ item.cantidad }}</p>
                        <p>Precio unitario: S/{{ item.precio }}</p>
                        <p><strong>Subtotal: S/{{ item.precio * item.cantidad }}</strong></p>
                    </div>
                </div>

                <div class="order-total" *ngIf="items.length > 0">
                    <p><strong>Total:</strong> S/{{ total }}</p>
                </div>
            </div>

            <!-- Formulario de pago -->
            <div class="payment-form">
                <h3>Información de Envío y Pago</h3>
                <form (ngSubmit)="confirmarPedido()" #paymentForm="ngForm">
                    <div class="form-group">
                        <label for="nombre">Nombre completo</label>
                        <input type="text" id="nombre" name="nombre" ngModel required>
                    </div>

                    <div class="form-group">
                        <label for="direccion">Dirección</label>
                        <input type="text" id="direccion" name="direccion" ngModel required>
                    </div>

                    <div class="form-group">
                        <label for="telefono">Teléfono</label>
                        <input type="tel" id="telefono" name="telefono" ngModel required>
                    </div>

                    <div class="form-group">
                        <label for="correo">Correo electrónico</label>
                        <input type="email" id="correo" name="correo" ngModel required>
                    </div>

                    <div class="form-group">
                        <label for="metodo-pago">Método de pago</label>
                        <select id="metodo-pago" name="metodo-pago" ngModel required>
                            <option value="">Selecciona una opción</option>
                            <option value="tarjeta">Tarjeta de crédito o débito</option>
                            <option value="yape">Yape / Plin</option>
                            <option value="transferencia">Transferencia bancaria</option>
                        </select>
                    </div>

                    <button type="submit" [disabled]="items.length === 0">
                        Confirmar Pedido
                    </button>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Modal / Mensaje de confirmación -->
<div *ngIf="pedidoConfirmado" class="modal">
    <div class="modal-content">
        <p>✅ Tu pedido ha sido confirmado. ¡Gracias por tu compra!</p>
    </div>
</div>